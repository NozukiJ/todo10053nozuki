<div *ngIf="!editMode" class="todo-card">
  <button (click)="onToggleCompletion()" class="complete-btn">
    {{ todo.completed ? 'âœ…' : 'â¬œ' }}
  </button>
  <div class="todo-details">
    <div class="todo-detail todo-title" (click)="toggleExpand($event)" title="{{ todo.title }}">{{ todo.title }}</div>
    <div class="todo-detail todo-description" (click)="toggleExpand($event)" title="{{ todo.description }}">{{ todo.description }}</div>
    <div *ngIf="todo.dueDate" class="todo-detail todo-due-date" (click)="toggleExpand($event)" title="{{ todo.dueDate.toDate() | date:'short' }}">
      ğŸ“… {{ todo.dueDate.toDate() | date:'short' }}
    </div>
    <div class="todo-detail todo-tags" (click)="toggleExpand($event)" title="{{ todo.tags.join(', ') }}">
      ğŸ·ï¸ 
      <span *ngFor="let tag of todo.tags" class="todo-tag">{{ tag }}</span>
    </div>
    <div class="todo-detail todo-priority" (click)="toggleExpand($event)" title="{{ todo.priority }}">
      ğŸ”¥ {{ todo.priority }}
    </div>
    <div class="todo-detail todo-location" (click)="toggleExpand($event)" title="{{ todo.location }}">
      ğŸ“ {{ todo.location }}
    </div>
  </div>
  <button (click)="onEdit()" class="edit-btn">ç·¨é›†</button>
  <button (click)="onDelete()" class="delete-btn">å‰Šé™¤</button>
</div>

<div *ngIf="editMode" class="todo-edit-form">
  <input type="text" [(ngModel)]="editTitle" placeholder="ã‚¿ã‚¤ãƒˆãƒ«">
  <input type="text" [(ngModel)]="editDescription" placeholder="èª¬æ˜">
  <input type="datetime-local" [(ngModel)]="editDueDateTime" placeholder="ç· ã‚åˆ‡ã‚Š">
  <input type="text" [(ngModel)]="editTags" placeholder="ã‚¿ã‚°ï¼ˆã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šï¼‰">
  <select [(ngModel)]="editPriority">
    <option value="high">é«˜</option>
    <option value="medium">ä¸­</option>
    <option value="low">ä½</option>
  </select>
  <input type="text" [(ngModel)]="editLocation" placeholder="å ´æ‰€">
  <button (click)="onSave()">ä¿å­˜</button>
  <button (click)="onCancel()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
</div>
